# Q : React에서 가상돔의 정의와 동작방식에 대해서 설명해주세요.

<br />

# A : React의 가상돔(Virtual DOM)은 실제 DOM의 복사본으로, JavaScript 객체 형태로 메모리 내에 저장됩니다

- 이러한 가상돔은 실제 DOM의 복사본이므로, 실제 DOM의 모든 element와 속성을 공유하게 됩니다.
- 가상 DOM은 실제 DOM과 내용을 공유하는 복사본이나, 실제 DOM과 다르게 직접적으로 브라우저 화면의 UI를 조작하는 API는 제공하지 않습니다.
  - 때문에 가상돔에 접근하고 수정하는 것은 매우 가볍고 빠른 작업이 되고, 이는 최종적으로 브라우저를 더욱 빠르게 렌더링할 수 있게 해줍니다.

### 가상돔의 동작방식

**리액트는 항상 두개의 가상돔 객체를 보유합니다**

1. 렌더링 이전에 화면 구조를 나타내는 가상돔
2. 렌더링 이후 보이게 될 화면 구조를 나타내는 가상돔

- 리액트는 상태가 변경될 때마다 리렌더링이 발생하게 되는데, 이시점마다 새로운 내용이 담긴 가상돔을 생성합니다.
- 렌더링 이전에 화면에 내용을 담고 있는 첫번째 가상돔과 업데이트 된 이후 발생한 두번째 가상돔을 비교해 정확히 어떤 Element가 변했는지 Diffing 알고리즘에 의해 비교합니다.
- 이후, 실제 DOM에 UI를 업데이트하는데, 이과정을 Reconciliation, 재조정이라고 합니다.
- 이러한 과정들이 효율적으로 동작하는 이유는 변경된 모든 Element들을 집단화 시켜 이를 한번에 DOM에 적용시키기 때문입니다. 이러한 집단화 과정을 배치 업데이트라고 합니다.
  - 예를 들어 리스트 내부에 10개의 항목들이 바뀌었다면 실제 DOM을 10번 반복해 수정하는 것이아닌, 이를 집단화 시켜 한번만 적용한다는 점입니다.
